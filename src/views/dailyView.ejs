<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WorryLess</title>
  <!-- Bootstrap Library CSS CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>
  <!-- JQuery -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <!-- Custom CSS -->
  <link rel="stylesheet" href="/styles/layout.css" />
  <!-- <link rel="stylesheet" href="/styles/home_page.css" /> -->
  <link rel="stylesheet" href="/styles/dailyView.css">

  <link rel="stylesheet"
    href="https://fonts.sandbox.google.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  </head>
  <!-- FAVICON -->
  <link rel="icon" type="image/x-icon" href="/img/favicon.ico" />

  <style>
    .card {
      margin: 10px 10px;
    }

    .btn-primary {
      background-color: #6545a4;
      border-color: #9062ea;
    }

    .btn-primary:hover {
      background-color: #9062ea;
      border-color: #9062ea;
    }
  </style>
</head>

<body>
  <!-- Header -->
  <nav class="navbar">
    <a class="navbar-brand" href="/home">
      <img src="/img/WorryLessIcon.png" width="30" height="30" class="d-inline-block align-top" alt="WorryLess Icon" />
      <span>WorryLess</span>
    </a>
    <a href="/home">
      <i class="material-symbols-outlined">close</i>
    </a>
  </nav>

  <main>

    <!-- CARDS DISPLAY -->

    <% if (worryEntries.length === 0) { %>
      <p>You have no entry this day.</p>
      <% } %>

        <% worryEntries.forEach(entry=> { %>

          <div class="card text-center worry-card" id="<%= entry.id %> ">
            <div class="card-header">
              <div class="entry-time">
                <%= entry.time %>
              </div>
              <div class="entry-mood">
                Mood: <%- entry.moodIcon %>
              </div>
            </div>
            <div class="card-body">

              <div class="entry-content">
                <% if (entry.description) { %>
                  <p>Description:</p>
                  <p>
                    <%= entry.description %>
                  </p>

                  <% } else { %>
                    <p>No Description.</p>
                    <% } %>
              </div>
              <div class="buttons">
                <button class="btn btn-primary editBtn" type="button" data-bs-toggle="collapse"
                  data-bs-target="#entry<%= entry.id %>" aria-expanded="false" aria-controls="entry<%= entry.id %>" id="<%= entry.id %>">
                  Edit
                </button>

                <input type="button" name="deleteEntry" class="deleteEntry btn secondary-primary" value="Delete" />

              </div>

            </div>

            <!-- Collapse input content -->
            <div class="collapse" id="entry<%= entry.id %>">
              <div class="card card-body">
                <input type="textarea" name="worryEntry" id="worryEntry" class="form-control"
                  value="<%= entry.description %>" />
                <br />
                <input type="submit" name="save" id="save<%= entry.id %>" class="btn btn-primary saveEntry"
                  value="Save" />
              </div>
            </div>
          </div>

          <% }) %>

  </main>
  <footer id="nav" class="navbar justify-content-evenly fixed-bottom" style="height: 4em">
    <a class="icon-btn" href="/home">
      <i class="material-symbols-outlined">home</i>
      <p class="btm-btn-text">Home</p>
    </a>
    <a class="icon-btn" href="/worryForm">
      <i class="material-symbols-outlined">add_box</i>
      <p class="btm-btn-text">Journal</p>
    </a>
    <a class="icon-btn" href="/">
      <i class="material-symbols-outlined">alarm</i>
      <p class="btm-btn-text">Alarms</p>
    </a>
    <a class="icon-btn" href="/profile">
      <i class="material-symbols-outlined">person</i>
      <p class="btm-btn-text">Profile</p>
    </a>
  </footer>
</body>
<!-- JAVASCRIPT -->
<script src="/scripts/dailyview.js"></script>

</html>